(function(){"use strict";var a,b;if(!String.prototype.swap)String.prototype.swap=function(a){return this.replace(/\{([^{}]*)\}/g,function(b,c){var d=a[c];return typeof d==='string'||typeof d==='number'?d:b;});};function c(a){$("article").html(b.n.swap({'sp':a}));}function d(d){var e={},f=[],g={},h={},i=[],j=[],k=[],l=false;d.split(" ").forEach(function(a){if(a)k.push(a);});k.forEach(function(b){if(!a.w[b])l=true;else e[b]=a.w[b];});if(l){c(d);return false;}$.each(e,function(a,b){var c=[];if(!f.length)b.forEach(function(a){f.push(a[0]);g[a[0]]=a[1];});else{b.forEach(function(a){if(f.indexOf(a[0])>-1){c.push(a[0]);g[a[0]]+=a[1];}else delete g[a[0]];});f=c;}});f.forEach(function(a){if(!(g[a] in h))h[g[a]]=[];h[g[a]].push(a);i.push(g[a]);});i.sort();i=$.unique(i);i.sort(function(a,b){return b-a;});i.forEach(function(b){h[b].forEach(function(b){j.push(a.a[b]);});});if(j.length===0)c(d);else $("article").html(b.r.swap({'sp':d})+j.join(" "));return false;}$(function(){$('#search').show();if(!b)$.getJSON("templates.json",{async:false}).done(function(a){b=a;});$("#searchform input").keypress(function(c){var e;if(c.which===13){$("article").html(b.w);e=this.value;c.preventDefault();$(document).attr('title',b.t);if(!a)$.getJSON("search.json",{async:false}).done(function(b){a=b;d(e);});else d(e);}});});})();